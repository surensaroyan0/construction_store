<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="{{ STATIC_URL }}/css/profile.css">
    <title>BuildSupply Co</title>
</head>
<body>
    <header>
        <div class="size">
            <div class="around">
                <div class="header_box logo">
                    <h1><a href="/api/home/">BuildSupply Co</a></h1>
                </div>
                <div class="header_box menu">
                    <nav>
                        <ul>
                            <li><a href="/api/about/">About Us</a></li>
                        {% if store_user %}
                            <li><a href="/api/cart/">Cart</a></li>
                            <li><a href="/api/orders/">Orders</a></li>
                            <li>Profile
                                <ul>
                                    <li><a href="/api/user/profile/{{ store_user.id }}/">Settings</a></li>
                                    <li><a href="/api/user/logout/">Log out</a></li>
                                </ul>
                            </li>
                        {% else %}
                            <li><a href="/api/user/login/">Sign In</a></li>
                        {% endif %}
                        </ul>
                    </nav>
                </div>
            </div>
        </div>
    </header>

{% if error_message %}
    <p class="error">{{ error_message }}</p>
{% else %}
    <div class="form_parent">
        <form action="/api/user/profile/{{ store_user.id }}/" method="post" enctype="multipart/form-data">
        {% csrf_token %}
            <div class="size">
                <div class="profile-pic">
                    <label class="-label" for="file">
                        <span class="change_image">Change Image</span>
                    </label>
                    <input type="file" name="profile_picture" onchange="loadFile(event)" id="file">
                    {% if store_user.profile_picture %}
                        <img src="{{ store_user.profile_picture }}" id="output">
                    {% else %}
                        <img src="{{ STATIC_URL }}/img/profile_picture.webp" id="output">
                    {% endif %}
                </div>

                <label for="username">Username:</label>
                <input type="text" id="username" name="username" value="{{ store_user.username }}">

                <label for="firstname">Firstname:</label>
                <input type="text" id="firstname" name="firstname" value="{{ store_user.firstname }}">

                <label for="lastname">Lastname:</label>
                <input type="text" id="lastname" name="lastname" value="{{ store_user.lastname }}">

                <label for="email">Email:</label>
                <input type="email" id="email" name="email" value="{{ store_user.email }}">

                <label for="phone_number">Phone Number:</label>
                <input type="text" id="phone_number" name="phone_number" value="{{ store_user.phone_number }}">

                <div class="gender">
                    <label>Gender:</label>
                    <div class="male">
                        <input type="radio" name="gender"
                               {% if store_user.gender == "Male" %}checked{% endif %} value="1">
                        <label>Male</label>
                    </div>
                    <div class="female">
                        <input type="radio" name="gender"
                               {% if store_user.gender == "Female" %}checked{% endif %} value="2">
                        <label>Female</label>
                    </div>
                </div>

                <label for="payment">Card:</label>
                <input type="text" id="payment" name="payment">

                <input type="submit" value="Save Changes">

                <a href="/api/user/profile/{{ store_user.id }}/delete/" class="delete_user">Delete User</a>
            </div>
        </form>
    </div>
{% endif %}
    <script>
        var loadFile = function (event) {
            var image = document.getElementById("output");
            image.src = URL.createObjectURL(event.target.files[0]);
        };
    </script>
</body>
</html>